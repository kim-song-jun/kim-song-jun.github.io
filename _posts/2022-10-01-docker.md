---
layout: single
title: "📝 도커 정리해보자"
toc: true
toc_sticky: true
toc_label: "도커"
categories: etc
excerpt: "도커 한방에 정리!"
tag: [docker]
---

# 0. 소개

22년 스택오버플러우 설문조사를 확인해보면, git 다음으로 많이쓰는게 docker임
<br>
그럼 이게 멀까?

# 1. 그래서 이게 먼데?

> 도커란? 어플리케이션을 패키징 할 수 있는 툴

컨테이너 라고 불리는 하나의 작은 소프트웨어 유닛 내부에
application, system tools, dependencies 모든걸 하나로 묶어서
다른서버 다른 PC, 다른 운영체제에서도 사용할 수 있게 됨

예를들어 node.js를 사용한다 했을때 로컬에서 사용하는데
node.js와 npm 디팬던시, config 등을 모든 서버 모든 피시에 설정하는거는 귀찮고 오류가 발생할 확률이 매우 높음

- 나도 node js를 쓰고, 서버도 node.js를 쓰니까 app.js만 올리면 동작하겠지 => 이게 말이 안됨
- 버전 문제라던가 기타 둥둥 문제가 생길꺼임

이런 문제를 해결하기 위한게 바로 도커임

- 우리의 부끄러운 app.js 뿐만 아니라
- 이걸 동작하기위한 버전
- 환경설정, npm, 여러 라이브러리, 디팬던시 등
- 한번에 모와서 도커 컨테이너 안에 넣어둠
- 어떤 pc에서든지 다 잘 동작하긋지,,,,
- 짱짱 유용하다

# 2. 컨테이너와 가상머신의 차이

보면볼수록 virtual box같은넘이랑 비슷한데?

## 하지만 동작 방법이 다름

- VM은 infrastructure 위에 Hypervisor 소프트웨어를 이용해
- 각각 가상의 머신을 만들 수 있음
- 각각의 가상의 머신에는 각 운영체제를 포함함
- 그래서 맥애서 window도 돌릴수있음
- 하지만? 무겁다,,, 개무겁다,,,
- 시작하는데도 오래걸ㄹ리고,,리소스도 많이 먹긋제,,

## 그래서 컨테이너는 먼데?

- 가상머신을 경량화 시키자!
- 똑같은 infrastructure 위에 Hypervisor이 아닌
- Host OS(기존 OS)를 사용하며 그위에 Container Engine을 올려둠
- 이 위에 개별 컨테이너를 만들어서 고립된 환경에서 구동되게 해줌
- 그래서 다른점은 OS를 포함하지 않고, 동일한 OS를 공유하는거라는겨

이 컨테이너 엔진이 바로 도커 엔진 ㅎㅎ

# 3. 도커의 동작 순서

1. 컨테이너 만들고
   1. 도커파일 만들기
      - 컨테이너를 어떻게 만들어야 하는지에 대한 설명서? 레시피
      - 꼭 필요한 파일, 라이브러리, 디팬던시 등 명시
      - 필요한 환경변수 설정
      - 어떻게 구동해야하는지 스크립트 포함 가능
   2. 이미지 파일 만들기
      - 어플리케이션을 실행하기 위한 런타임 환경 등등 모든 세팅들이 포함되어 있음
      - 쉽게말하면 현재 실행중인 어플리케이션의 상태를 스샷마냥 찍어서 보관한다고 생각하면 좋음
      - 그래서 이미지는 변경을 못하는 불변의 상태임
      - 약간 클래스랑 비슷하달까?
   3. 컨테이너 만들기
      - 우리가 잘 만든 애들을 컨테이너 안에서만 동작하는데
      - 고립된 환경, 이미지를 통해 구동한다
2. 구동하고
3. 배포한다
   1. git과 github같은 느낌
   2. 공유할수 있는 Container repogistory는 docker hub, red hat, github 등이 있음
   3. private은 aws, google cloud, azure이 있음

# 4. 아마도 총정리

1. 로컬에 도커 설치하셈
2. 서버에도 도커 설치하셈
3. 로컬에서 도커파일 작성 후 이미지 생성
4. container registry 에 push 함
5. 이후 sever에서 pull 하고
6. run하셈

# 5. 그래서 사용 예시는 어디감?

아 나중에 추가한다고~
